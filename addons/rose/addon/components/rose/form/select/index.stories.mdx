import { Meta, Story, Preview } from '@storybook/addon-docs';
import { hbs } from 'ember-cli-htmlbars';
import { action } from '@storybook/addon-actions';
import { text, boolean, select } from '@storybook/addon-knobs';

<Meta title="Rose/Form/Select" component="Form/Select" />

# Form Select

Renders a form select element.

```htmlbars
<Rose::Form::Select
  @name='select-name'
  @value='green'
  @label='Color'
  @helperText='Set your desired color'
  @disabled={{false}}
  @error={{false}}
  as |field|
>
  <field.field as |select|>
    <select.option>Choose a color</select.option>
    <select.option @value='red'>Red</select.option>
    <select.option @value='green'>Green</select.option>
    <select.option @value='blue'>Blue</select.option>
  </field.field>
</Rose::Form::Select>
```

<Preview>
  <Story name="Basic" height="10rem">
    {{
      template: hbs`
      <Rose::Form::Select
        @name={{name}}
        @value={{value}}
        @label={{label}}
        @helperText={{helperText}}
        @disabled={{disabled}}
        @error={{false}}
        @onChange={{fn onChange}}
        as |field|
      >
        <field.field as |select|>
          <select.option>Choose an option</select.option>
          <select.option @value="value-1">Value 1</select.option>
          <select.option @value="value-2">Value 2</select.option>
          <select.option @value="value-3">Value 3</select.option>
        </field.field>
      </Rose::Form::Select>
    `,
      context: {
        value: select(
          'value',
          {
            null: null,
            'value-1': 'value-1',
            'value-2': 'value-2',
            'value-3': 'value-3',
          },
          null
        ),
        name: text('name', 'select-name'),
        label: text('label', 'Label'),
        helperText: text('helperText', 'Helper text'),
        disabled: boolean('disabled', false),
        onChange: action('changed'),
      },
    }}
  </Story>
</Preview>

<Preview>
  <Story name="Select with Errors" height="10rem">
    {{
      template: hbs`
      <Rose::Form::Select
        @name={{name}}
        @value={{value}}
        @label={{label}}
        @helperText={{helperText}}
        @disabled={{disabled}}
        @error={{true}}
        @onChange={{fn onChange}}
        as |field|
      >
        <field.field as |select|>
          <select.option>Choose an option</select.option>
          <select.option @value="value-1">Value 1</select.option>
          <select.option @value="value-2">Value 2</select.option>
          <select.option @value="value-3">Value 3</select.option>
        </field.field>
        <field.errors as |errors|>
          <errors.message>An error occurred.</errors.message>
        </field.errors>
      </Rose::Form::Select>
    `,
      context: {
        value: select(
          'value',
          {
            null: null,
            'value-1': 'value-1',
            'value-2': 'value-2',
            'value-3': 'value-3',
          },
          null
        ),
        name: text('name', 'select-name'),
        label: text('label', 'Label'),
        helperText: text('helperText', 'Helper text'),
        disabled: boolean('disabled', false),
        onChange: action('changed'),
      },
    }}
  </Story>
</Preview>

<Preview>
  <Story name="Fully Contextual Select">
    {{
      template: hbs`
      <Rose::Form::Select @value="value-3" @error={{true}} @contextual={{true}} as |field|>
        <hr />
        <field.label>Label</field.label>
        <hr />
        <field.helperText>Help</field.helperText>
        <hr />
        <field.field as |select|>
          <select.option @value="value-1">Value 1</select.option>
          <select.option @value="value-2">Value 2</select.option>
          <select.option @value="value-3">Value 3</select.option>
        </field.field>
        <hr />
        <field.errors as |errors|>
          <errors.message>An error occurred.</errors.message>
        </field.errors>
        <hr />
      </Rose::Form::Select>
    `,
      context: {},
    }}
  </Story>
</Preview>
