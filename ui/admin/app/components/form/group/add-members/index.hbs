{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: MPL-2.0
}}

{{#if this.availableUsers}}
  <Rose::Form
    class='full-width'
    @onSubmit={{fn this.submit @submit}}
    @cancel={{@cancel}}
    @disabled={{@model.isSaving}}
    as |form|
  >

    <form.actions
      @submitText={{t 'resources.group.actions.add-members'}}
      @cancelText={{t 'actions.cancel'}}
    />
    <Hds::Table
      @model={{this.availableUsers}}
      @columns={{array
        (hash label=(t 'form.name.label'))
        (hash label=(t 'form.id.label'))
        (hash label=(t 'resources.scope.title'))
        (hash label=(t 'form.description.label'))
      }}
      @valign='middle'
    >
      <:body as |B|>
        <B.Tr>
          <B.Td>
            <div class='checkbox-badge-valign-middle'>
              <Hds::Form::Checkbox::Field
                class='hds-form-field--layout-vertical'
                {{on 'change' (fn this.toggleMember B.data)}}
                as |F|
              >
                <F.Label>{{B.data.displayName}}</F.Label>
                {{#if B.data.accountName}}
                  <F.HelperText>
                    <Hds::Badge @text={{B.data.accountName}} />
                  </F.HelperText>
                {{/if}}
              </Hds::Form::Checkbox::Field>
            </div>
          </B.Td>
          <B.Td><code>{{B.data.id}}</code></B.Td>
          <B.Td><ScopeBadge @scope={{B.data.scopeModel}} /></B.Td>
          <B.Td>{{B.data.description}}</B.Td>
        </B.Tr>

      </:body>
    </Hds::Table>

  </Rose::Form>
{{/if}}

{{#unless this.availableUsers}}
  <Rose::Layout::Centered>
    <Rose::Message
      @title={{t 'resources.group.messages.no-members.title'}}
      as |message|
    >
      <message.description>
        {{t 'resources.group.messages.no-members.description'}}
      </message.description>
      <message.link @route='scopes.scope.groups.group.members'>
        <Rose::Icon @name='flight-icons/svg/chevron-left-16' />
        {{t 'actions.back'}}
      </message.link>
    </Rose::Message>
  </Rose::Layout::Centered>
{{/unless}}