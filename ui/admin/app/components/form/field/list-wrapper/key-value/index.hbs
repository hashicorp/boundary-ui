{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: MPL-2.0
}}
{{#let (unique-id) (unique-id) as |keyHeaderID valueHeaderID|}}
  <Hds::Table class='list-wrapper-field' name={{@name}}>
    <:head as |H|>
      <H.Tr>
        <H.Th id={{keyHeaderID}}>
          {{#if @keyLabel}}
            {{@keyLabel}}
          {{else}}
            {{t 'form.key.label'}}
          {{/if}}</H.Th>
        <H.Th id={{valueHeaderID}}>
          {{#if @valueLabel}}
            {{@valueLabel}}
          {{else}}
            {{t 'form.value.label'}}
          {{/if}}
        </H.Th>
        <H.Th>
          {{t 'titles.actions'}}
        </H.Th>
      </H.Tr>
    </:head>
    <:body as |B|>
      {{#each this.options as |option index|}}
        <B.Tr>
          <B.Td>
            {{yield
              (hash
                text=(component
                  'form/field/list-wrapper/key-value/text'
                  disabled=@disabled
                  value=option.key
                  ariaLabel=keyHeaderID
                  setContext=(set-from-event option 'key')
                )
              )
              to='key'
            }}
          </B.Td>

          <B.Td>
            {{yield
              (hash
                text=(component
                  'form/field/list-wrapper/key-value/text'
                  disabled=@disabled
                  value=option.value
                  ariaLabel=valueHeaderID
                  setContext=(set-from-event option 'value')
                )
                select=(component
                  'form/field/list-wrapper/key-value/select'
                  disabled=@disabled
                  value=option.value
                  selectOptions=@selectOptions
                  ariaLabel=valueHeaderID
                  setContext=(set-from-event option 'value')
                )
              )
              to='value'
            }}
          </B.Td>

          <B.Td>
            {{#if this.removeOptionByIndex}}
              <Hds::Button
                data-test-remove-button
                @text={{t 'actions.remove'}}
                @color='critical'
                @icon='trash'
                @isIconOnly={{true}}
                disabled={{@disabled}}
                {{on 'click' (fn this.removeOptionByIndex index)}}
              />
            {{/if}}
          </B.Td>
        </B.Tr>
      {{/each}}

      <B.Tr>
        <B.Td>
          {{yield
            (hash
              text=(component
                'form/field/list-wrapper/key-value/text'
                disabled=@disabled
                value=this.newOptionKey
                ariaLabel=keyHeaderID
                setContext=(set-from-event this 'newOptionKey')
              )
            )
            to='key'
          }}
        </B.Td>

        <B.Td>
          {{yield
            (hash
              text=(component
                'form/field/list-wrapper/key-value/text'
                disabled=@disabled
                value=this.newOptionValue
                ariaLabel=valueHeaderID
                setContext=(set-from-event this 'newOptionValue')
              )
              select=(component
                'form/field/list-wrapper/key-value/select'
                disabled=@disabled
                value=this.newOptionValue
                selectOptions=@selectOptions
                ariaLabel=valueHeaderID
                setContext=(set-from-event this 'newOptionValue')
              )
            )
            to='value'
          }}
        </B.Td>

        <B.Td>
          <Hds::Button
            @text={{t 'actions.add'}}
            @color='secondary'
            type='button'
            disabled={{or @disabled (not this.newOptionKey)}}
            {{on 'click' this.addOption}}
          />
        </B.Td>
      </B.Tr>

    </:body>
  </Hds::Table>

{{/let}}