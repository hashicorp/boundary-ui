{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: BUSL-1.1
}}
{{page-title (t 'resources.app-token.tabs.permissions')}}
<Breadcrumbs::Item
  @text={{t 'resources.app-token.tabs.permissions'}}
  @route='scopes.scope.app-tokens.app-token.permissions'
/>
{{#if this.showNoActiveScopesWarning}}
  <Hds::Alert
    class='app-token-permissions-alert'
    @type='inline'
    @color='warning'
    @onDismiss={{this.noop}}
    as |A|
  >
    <A.Title>{{t 'resources.app-token.messages.no-active-scopes.title'}}
    </A.Title>
    <A.Description>
      {{t
        'resources.app-token.messages.no-active-scopes.description'
        htmlSafe=true
      }}
    </A.Description>
    <A.Button
      @color='secondary'
      @text={{t 'resources.app-token.actions.clone'}}
    />
    <A.Button
      @color='tertiary'
      @text={{t 'resources.app-token.actions.delete'}}
      @icon='trash'
    />
  </Hds::Alert>
{{/if}}

<Hds::Table
  @model={{@model.permissions}}
  @columns={{array
    (hash label=(t 'resources.app-token.titles.labels'))
    (hash label=(t 'resources.app-token.titles.grants'))
    (hash
      label=(t 'resources.app-token.titles.active-scopes')
      tooltip=(t 'resources.app-token.messages.tooltips.active-scopes')
    )
    (hash label=(t 'resources.app-token.titles.deleted-scopes'))
  }}
  @valign='middle'
>
  <:body as |B|>
    <B.Tr>
      <B.Td>
        {{#if B.data.label}}
          {{B.data.label}}
        {{else}}
          —
        {{/if}}
      </B.Td>
      <B.Td>{{B.data.grant.length}}</B.Td>
      <B.Td>
        {{#if B.data.grant_scopes}}
          {{B.data.grant_scopes.length}}
        {{else}}
          —
        {{/if}}
      </B.Td>
      <B.Td>
        {{#if B.data.deleted_scopes}}
          {{B.data.deleted_scopes.length}}
        {{else}}
          —
        {{/if}}
      </B.Td>
    </B.Tr>
  </:body>
</Hds::Table>