name: "Trigger Boundary UI release"

on:
  push:
    tags:
      - '*'

jobs:
  trigger-circleci-release:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Release description
        run: |
          echo "Triggering release with a TAG ${GITHUB_REF#refs/tags/}"
      - name: Trigger Release workflow in boundary-ui-releases
        uses: benc-uk/workflow-dispatch@798e70c97009500150087d30d9f11c5444830385
        with:
          workflow: release.yml
          repo: hashicorp/boundary-ui-releases
          token: "${{ secrets.ELEVATED_GITHUB_TOKEN }}"
          inputs: '{ "TAG": "${GITHUB_REF#refs/tags/}" }'